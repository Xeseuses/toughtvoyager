{{ define "main" }}
<main style="padding: 2rem; max-width: 850px; margin: auto; font-family: 'Segoe UI', sans-serif; background: #f4f8f5;">

  <style>
    .section-title {
      font-size: 2.75rem;
      margin-bottom: 0.5rem;
      color: #2e4d3a;
    }

    .intro {
      font-size: 1.15rem;
      color: #444;
      margin-bottom: 3rem;
    }

    .stage-cluster {
      margin-bottom: 3rem;
    }

    .stage-title {
      font-size: 1.75rem;
      margin-bottom: 1.25rem;
      color: #3b7a57;
    }

    .post-card {
      background: #fff;
      padding: 1.5rem 1.75rem;
      border-radius: 12px;
      border: 1.5px solid #ddeedd;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      cursor: pointer;
      margin-bottom: 1.5rem;
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .post-card:hover {
      transform: scale(1.02);
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
    }

    .post-header {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .post-title {
      font-size: 1.3rem;
      color: #222;
      font-weight: 600;
      margin: 0;
      flex-grow: 1;
    }

    .post-meta {
      color: #666;
      font-size: 0.9rem;
      min-width: 130px;
      text-align: right;
    }

    .post-summary {
      color: #444;
      font-size: 1rem;
      margin: 0.75rem 0 0 0;
    }

    .wander-btn {
      padding: 0.6rem 1.2rem;
      font-size: 1rem;
      border: none;
      background: #4caf50;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      margin-bottom: 2rem;
    }
  </style>

  <header>
    <h1 class="section-title">Thought Voyager</h1>
    <p class="intro">
      Welcome to my Digital Garden ‚Äî a place for ideas, reflections, and exploration.<br>
      Dive into topics that spark curiosity and growth.
    </p>
     <button class="wander-btn" onclick="goToRandomPost()">üåø Wander Randomly</button>
  </header>

  {{ $posts := where .Site.RegularPages "Type" "posts" }}
  {{ if not (len $posts) }}
    <p>No posts found yet. Stay tuned!</p>
  {{ else }}
    {{ $stages := slice "üå± Seedling" "üåø Budding" "üå≥ Evergreen" }}
    {{ range $stage := $stages }}
      {{ $filtered := where $posts "Params.stage" $stage }}
      {{ if gt (len $filtered) 0 }}
        <section class="stage-cluster">
          <h2 class="stage-title">{{ $stage }}</h2>
          <ul style="list-style: none; padding-left: 0;">
            {{ range sort $filtered "Date" "desc" }}
            <li>
              <div class="post-card" onclick="window.location.href='{{ .Permalink }}'">
                <div class="post-header">
                  <h3 class="post-title">{{ .Title }}</h3>
                  <div class="post-meta">
                    {{ .Date.Format "Jan 2, 2006" }}<br>‚è±Ô∏è {{ .ReadingTime }} min read
                  </div>
                </div>
                <p class="post-summary">{{ .Summary | plainify }}</p>
              </div>
            </li>
            {{ end }}
          </ul>
        </section>
      {{ end }}
    {{ end }}
  {{ end }}

</main>
{{ partial "random-script.html" . }}
{{ end }}

